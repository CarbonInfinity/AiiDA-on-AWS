# Connecting AiiDA to the cluster
There are many options as to how AiiDA can be run. In the following we will run AiiDA from our cloud9 instance using a docker container. You could just as well install AiiDA natively in the same VM (e.g. using [this](https://galaxy.ansible.com/marvel-nccr/aiida) ansible) or run from your local machine.

## 1.1. Downloading and configuring the AiiDA container
Before we start connecting AiiDA with our HPC we need to setup and configure the container from which we will be running AiiDA. Depending on your configuration your volume may be too small to download the container. See [troubleshooting](../troubleshooting/troubleshooting.md) to resolve this.

To start:
1. Pull the docker container: `docker pull aiidateam/aiida-core:latest`  
2. Create a volume to associate with the container: `docker volume create aiida-data`
3. Launch to container: `docker run -d --name aiida-container --mount source=aiida-data,target=/tmp/data aiidateam/aiida-core:latest`
4. Enter into the container: `docker exec -it --user aiida aiida-container /bin/bash`

We have now a container running AiiDA. To verify that everything works as it should you can run `verdi status`. The aiida user currently has very few privileges making it hard to do things like file handling. 

To change this:
1. Exit the container
2. Reenter as root: `docker exec -it --user root aiida-container /bin/bash`
3. Change the root password: `passwd`
4. Give the AiiDA user permission to `/tmp` and `/home`: `chown -r aiida /tmp /home`
5. Exit and reenter as aiida
6. Verify everything still works: `verdi status`

Our container is now ready to connect to the HPC cluster.

## 1.2. Connecting to the HPC cluster

